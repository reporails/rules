rules:
  - id: S4-backbone-no-maps
    message: "Backbone missing 'maps:' section"
    severity: ERROR
    languages: [generic]
    patterns:
      - pattern-regex: "(?s)\\A[\\s\\S]+"
      - pattern-not-regex: "(?m)^maps:"
    paths:
      include:
        - ".reporails/backbone.yml"

  - id: S4-backbone-no-contracts
    message: "Backbone missing 'contracts:' section"
    severity: WARNING
    languages: [generic]
    patterns:
      - pattern-regex: "(?s)\\A[\\s\\S]+"
      - pattern-not-regex: "(?m)^contracts:"
    paths:
      include:
        - ".reporails/backbone.yml"

  - id: S4-backbone-no-quick-ref
    message: "Backbone missing 'quick_ref:' section"
    severity: WARNING
    languages: [generic]
    patterns:
      - pattern-regex: "(?s)\\A[\\s\\S]+"
      - pattern-not-regex: "(?m)^quick_ref:"
    paths:
      include:
        - ".reporails/backbone.yml"

  - id: S4-maps-no-components
    message: "Maps section missing 'components:' key"
    severity: WARNING
    languages: [generic]
    patterns:
      - pattern-regex: "(?sm)\\A(?=[\\s\\S]*^maps:)[\\s\\S]+"
      - pattern-not-regex: "(?m)^\\s+components:"
    paths:
      include:
        - ".reporails/backbone.yml"

  - id: S4-maps-no-platform
    message: "Maps section missing 'platform:' key"
    severity: WARNING
    languages: [generic]
    patterns:
      - pattern-regex: "(?sm)\\A(?=[\\s\\S]*^maps:)[\\s\\S]+"
      - pattern-not-regex: "(?m)^\\s+platform:"
    paths:
      include:
        - ".reporails/backbone.yml"

  - id: S4-empty-backbone
    message: "Backbone file appears empty or minimal"
    severity: ERROR
    languages: [generic]
    patterns:
      - pattern-regex: "(?s)\\A\\s*$"
      - pattern-not-regex: "(?m)^[a-z_]+:"
    paths:
      include:
        - ".reporails/backbone.yml"
