version: 2
generator: manual

agents:
  claude:
    main_instruction_file: CLAUDE.md
    config: agents/claude/config.yml
    skills: .claude/skills/
    tasks: .claude/tasks/
  codex:
    config: agents/codex/config.yml

rules:
  core: core/
  agents: agents/
  patterns:
    rule_dir: "{category}/{id}-{slug}/"
    definition: "{id}-{slug}.md"
    opengrep: "{id}-{slug}.yml"
    test_pass: "tests/pass.md"
    test_fail: "tests/fail.md"
  categories:
    structure: core/structure/
    content: core/content/
    efficiency: core/efficiency/
    governance: core/governance/
    maintenance: core/maintenance/
  agent_rules:
    claude: agents/claude/rules/
    codex: agents/codex/rules/

  index:
    # Core rules: ID → slug (resolve via: {category}/{id}-{slug}/)
    S1: size-limits
    S2: progressive-disclosure
    S3: no-embedded-code-snippets
    S4: yaml-backbone
    S5: clear-markdown-structure
    C1: core-sections
    C2: explicit-over-implicit
    C3: context-specific-content
    C4: anti-pattern-documentation
    C5: must-must-not-with-context
    C6: single-source-of-truth
    C7: emphasis-discipline
    C8: instructions-over-philosophy
    C9: has-project-description
    C10: has-never-statements
    C11: links-are-valid
    C12: has-version-date
    E1: deterministic-tools-for-style
    E2: session-start-ritual
    E3: purpose-based-file-reading
    E4: memory-reference
    E5: grep-efficiency
    E6: code-block-line-limit
    E7: import-count
    E8: context-window-awareness
    G1: team-governance-structure
    G2: security-rules-ownership
    G3: ownership-assignment
    G4: contract-registry
    G5: component-contract-binding
    G6: architecture-tests
    G7: metrics-and-cicd-checks
    M1: version-control
    M2: review-process
    M3: change-management
    M4: no-conflicting-rules
    M5: map-staleness-prevention
    # Agent rules: ID → slug (resolve via: agents/{agent}/rules/{id}-{slug}/)
    CLAUDE_S1: skill-size-limits
    CLAUDE_S2: hierarchical-memory
    CLAUDE_S3: path-scoped-rules
    CLAUDE_G1: organization-level-policies
    CLAUDE_M1: auto-generated-content-review
    CLAUDE_M2: rule-snippet-length

schemas:
  rule: schemas/rule.schema.yml
  agent: schemas/agent.schema.yml
  project: schemas/project.schema.yml
  sources: schemas/sources.schema.yml
  user: schemas/user.schema.yml
  levels: schemas/levels.schema.yml

artifacts:
  levels: levels.yml
  sources: docs/sources.yml
  capability_levels: docs/capability-levels.md
  changelog: UNRELEASED.md

shared:
  knowledge: .shared/knowledge/
  workflows: .shared/workflows/
